@using Syncfusion.EJ2.Maps;
@using Newtonsoft.Json;
@using System.IO;
@using AgrifoodManagement.Web.Models.Locator;

@{
    Layout = "~/Views/Shared/_ConsumerNavbarLayout.cshtml";
}

@model LocatorViewModel;

@{
    string continentField = "continent";

    var tooltip = new MapsTooltipSettings
    {
        Visible = true,
        ValuePath = "name",
        TextStyle = new MapsFont { FontFamily = "Segoe UI" }
    };
}

<div class="control-section">
    <div class="row">
        <div class="col-md-12">
            <ejs-maps id="maps" width="100%" height="calc(100vh - 150px)">
                <e-maps-titlesettings text="Farming locations"
                    alignment="Center"
                    textStyle="@(new MapsFont { Size = "16px", FontFamily = "Segoe UI", FontWeight = "Bold" })" />
                <e-maps-zoomsettings enable="true" />
                <e-maps-legendsettings visible="true" />

                <e-maps-layers>
                    <e-maps-layer shapeData="@(Model.MapData)"
                        dataSource="@(Model.ContinentColors)"
                        shapePropertyPath="@continentField"  
                        shapeDataPath="@continentField">

                        <e-layersettings-shapesettings colorValuePath="color"
                                                       fill="#E5E5E5"
                                                       stroke="#999" />

                        <e-layersettings-shapesettings 
                            Fill="#E5E5E5"
                            Stroke="#999"
                            ColorValuePath="color" />

                        <e-layersettings-markers>
                            <e-layersettings-marker visible="true"
                                                    dataSource="@Model.Locations"
                                                    shape="Image"
                                                    imageUrl="@Url.Content("~/images/balloon.png")"
                                                    height="20" width="20"
                                                    animationDuration="0"
                                                    tooltipSettings="@tooltip" />
                        </e-layersettings-markers>
                    </e-maps-layer>
                </e-maps-layers>
            </ejs-maps>
        </div>
    </div>
</div>

<style>
    .markerTemplate {
        font-size: 12px;
        color: white;
        text-shadow: 0 1px 1px black;
        font-weight: 500;
    }
</style>
