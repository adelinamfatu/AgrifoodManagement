@using Syncfusion.EJ2.Navigations;

@model IEnumerable<SidebarItem>

@{
    Layout = "~/Views/Shared/_SyncfusionLayout.cshtml";
}

@{
    var NavData = new List<SidebarItem>
    {
        new SidebarItem { Id = "1", Name = "Dashboard", Badge = null },
        new SidebarItem { Id = "2", Name = "eCommerce", Badge = null, HasChild = true },
        new SidebarItem { Id = "21", Name = "Analytics", Pid = "2", Badge = "Pro" },
    };

    // 2) Node template for the TreeView: shows text + optional "Pro" badge
    var nodeTemplate = @"
        <div class='nav-item'>
            <span class='nav-text'>${Name}</span>
            ${Badge ? '<span class=\'nav-badge\'>' + Badge + '</span>' : ''}
        </div>
    ";
}

<div class="sidebar-branding">
    <img src="~/images/plainadmin-logo.png" alt="PlainAdmin" class="sidebar-logo" />
    <span class="sidebar-brand-text">PlainAdmin</span>
</div>

<ejs-sidebar id="sidebarObj" Width="260px" Position="Left" target=".maincontent">
    <e-content-template>
        <ejs-treeview id="treeObj" NodeTemplate="@nodeTemplate" nodeSelected="OnSelect">
            <e-treeview-fields Id="Id"
                               Text="Name"
                               ParentID="Pid"
                               HasChildren="HasChild"
                               Expanded="Expanded"
                               DataSource="@NavData">
            </e-treeview-fields>
        </ejs-treeview>
    </e-content-template>
</ejs-sidebar>

<div class="maincontent">
    @RenderBody()
</div>

<script>
    function OnSelect(args) {
        console.log("Selected item:", args.nodeData.text);
    }
</script>

<style>
    body, html {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
    }

    .control-section, #sidebar-wrapper {
        margin: 0;
        padding: 0;
    }

    #sidebarObj {
        /* ensure the sidebar is on top of content if needed */
        z-index: 999;
    }

    .maincontent {
        margin-left: 260px; /* match the sidebar width */
        padding: 1rem;
    }

    /* ---- BRANDING AREA ---- */
    .sidebar-branding {
        display: flex;
        align-items: center;
        padding: 1rem;
        border-bottom: 1px solid #eaeaea;
    }

    .sidebar-logo {
        height: 30px;
        margin-right: 0.5rem;
    }

    .sidebar-brand-text {
        font-size: 1rem;
        font-weight: 600;
    }

    /* ---- NODE TEMPLATE (text + badge) ---- */
    .nav-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        /* you can adjust spacing, padding, etc. as needed */
        padding: 4px 0;
    }

    .nav-text {
        font-size: 14px;
        color: #666;
    }

    .nav-badge {
        background-color: #0d6efd; /* 'Pro' badge color */
        color: #fff;
        font-size: 0.7rem;
        padding: 2px 6px;
        border-radius: 12px;
        margin-left: 8px;
        white-space: nowrap;
    }

    /* (Optional) Hover or active states for the tree items */
    .e-treeview .e-list-item:hover .nav-text {
        color: #333;
    }

    .e-treeview .e-active .nav-text {
        color: #0d6efd; /* highlight active item */
        font-weight: 500;
    }

    /* Adjust subitems indentation if needed */
    .e-treeview .e-list-item.e-has-child .e-icons {
        /* The arrow icon that indicates subitems */
        margin-right: 8px;
    }
</style>